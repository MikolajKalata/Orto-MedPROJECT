<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <script>
        //onload="noBack();"
        // onpageshow="if (event.persisted) noBack();" onunload=""
        // window.onload = function () {
        //     var name = document.getElementById("name")
        //     name.setAttribute("value", "adam")
        // }
        window.onload = function () {

            var checkbox = document.getElementById("foreigner");
            checkbox.onclick = function () {
                var pesel = document.getElementById("pesel");
                if(checkbox.checked){
                    pesel.disabled = true;
                }
                else{
                    pesel.removeAttribute("disabled");
                }
            }
            document.getElementById("submit").onclick = function () {
                if(checkbox.checked){
                    document.getElementById("pesel").value = null;
                }
            }
        }
    </script>
<!--    <SCRIPT type="text/javascript">-->
<!--        window.history.forward();-->
<!--        function noBack() { window.history.forward(); }-->
<!--      </SCRIPT> -->
    <meta charset="UTF-8">
    <title>Registration</title>
</head>

<body>


<form th:action="@{/registration/success}" th:object="${patient}" method="post">
    <p>Data: <input type="date" th:value="${patient.dateOfVisit}" th:field="*{dateOfVisit}" readonly="true">
    <select th:field="*{timeOfVisit}">
        <option th:each="hour : ${hours}" th:value="${hour}" th:text="${hour}"></option>
    </select></p>
    <p>Lekarz: <input type="text" th:value="${patient.doctor}" th:field="*{doctor}" readonly></p>
    <p>Imię: <input type="text" id="name" th:value="${patient.firstName}" th:field="*{firstName}">
    <p>Nazwisko: <input type="text" th:value="${patient.lastName}" th:field="*{lastName}"></p>
    <p>PESEL*: <input type="text" id="pesel" th:value="${patient.pesel}" th:field="*{pesel}"></p>
    <p><label for="foreigner"> <font size="2">*Zaznacz tylko, jeśli jesteś obcokrajowcem. Check the box, only if you are the foreigner.</font></label>
    <input type="checkbox" id="foreigner" style="cursor: pointer"></p>
    <p>Numer telefonu: <input type="text" th:value="${patient.phoneNumber}" th:field="*{phoneNumber}"></p>
    <p>Adres e-mail: <input type="text" th:value="${patient.email}" th:field="*{email}"></p>
    <input type="submit" id="submit" value="Zarejestruj"> <input type="reset" id="reset" value="Resetuj dane">

    <!--Patient wanted to change the visit-->
    <div class="update" style="display: none">
    <input type="text" th:value="${patient.id}" th:field="*{id}">
    </div>
    <!-------------------------------------->

</form>
</body>
</html>